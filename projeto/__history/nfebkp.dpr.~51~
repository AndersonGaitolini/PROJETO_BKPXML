program nfebkp;

uses
  Vcl.Forms,
  Vcl.Controls,
  SysUtils,
  uDMnfebkp in '..\fontes\uDMnfebkp.pas' {DM_NFEDFE: TDataModule},
  uMetodosUteis in '..\fontes\uMetodosUteis.pas',
  uPadraoCons in '..\fontes\Padroes\uPadraoCons.pas' {frmPadraoCons},
  uFoPrincipal in '..\fontes\uFoPrincipal.pas' {foPrincipal},
  Atributos in '..\fontes\ORM\Atributos.pas',
  Base in '..\fontes\ORM\Base.pas',
  DaoFD in '..\fontes\ORM\DaoFD.pas',
  GerarClasse.BancoFirebird in '..\fontes\ORM\GerarClasse.BancoFirebird.pas',
  GerarClasse.BancoMySQL in '..\fontes\ORM\GerarClasse.BancoMySQL.pas',
  GerarClasse in '..\fontes\ORM\GerarClasse.pas',
  GerarClasseFireDac in '..\fontes\ORM\GerarClasseFireDac.pas',
  Configuracoes in '..\fontes\classes\Configuracoes.pas',
  uFoConfiguracao in '..\fontes\uFoConfiguracao.pas' {foConfiguracao},
  ufoGerarClasse in '..\fontes\ORM\ufoGerarClasse.pas' {foGeraClasse},
  Lm_bkpdfe in 'J:\fontes\classes\Lm_bkpdfe.pas',
  uPadraoEdicao in '..\fontes\Padroes\uPadraoEdicao.pas' {frmPadraoEdi},
  uLoadXML in '..\fontes\uLoadXML.pas',
  ufoLoginPadrao in '..\fontes\Padroes\ufoLoginPadrao.pas' {foLoginPadrao},
  ufoLogin in '..\fontes\ufoLogin.pas' {foLogin},
  Usuarios in '..\fontes\classes\Usuarios.pas';

var
 ShowResult : Byte;
 wMsg : string;
{$R *.res}


begin
  Application.Initialize;
  Application.MainFormOnTaskbar := True;
  Application.CreateForm(TDM_NFEDFE, DM_NFEDFE);
  Application.CreateForm(TfoLogin, foLogin);
  ShowResult := foLogin.ShowModal;

  if ShowResult = mrOk then
  begin
    Application.CreateForm(TFoPrincipal, FoPrincipal); //Cria a janela main
    FoPrincipal.Usuarios :=  foLogin.Usuario;
    wMsg := foLogin.statMsg.Panels[1].Text;
    FoPrincipal.statPrincipal.Panels[1].Text := wMsg;
    FoPrincipal.ShowModal;
    FreeAndNil(foLogin); //Libera o form de Login da memória
    Application.Run; //Roda a aplicação
   end
  else
  if ShowResult = mrCAncel then //Caso o retorno da tela de Login seja mrCancel então
    Application.Terminate; //Encerra a aplicação

    //by Anderson Gaitolini
end.
